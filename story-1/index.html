<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- EDIT THESE 4 LINES FOR YOUR STORY -->
    <meta property="og:title" content="The Adventure Bunny Story">
    <meta property="og:description" content="A fun interactive storybook for children">
    <meta property="og:image" content="preview.jpg">
    <meta property="og:url" content="https://yourusername.github.io/flipbooks/story-1/">
    
    <!-- EDIT THIS LINE FOR BROWSER TAB -->
    <title>The Adventurous Bunny - Kids Story Book</title>
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FFB6C1">
    
    <style>
        /* SIMPLE RESET */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(135deg, #FFE6E6 0%, #E6F7FF 100%);
            font-family: Arial, sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .flipbook-container {
            width: 90vw;
            height: calc(90vw * 0.666); /* 2:3 ratio */
            max-width: 1000px;
            max-height: 667px;
            position: relative;
            perspective: 1500px;
        }
        
        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            top: 0;
            background: white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transform-origin: left center;
            transition: transform 0.8s ease;
            overflow: hidden;
        }
        
        .page img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* LEFT PAGE (even numbers) */
        .page.left {
            left: 0;
            border-radius: 10px 0 0 10px;
        }
        
        /* RIGHT PAGE (odd numbers) */
        .page.right {
            left: 50%;
            border-radius: 0 10px 10px 0;
        }
        
        /* NAVIGATION BUTTONS */
        .nav-btn {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: #FF6B6B;
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 100;
        }
        
        .nav-btn:hover {
            background: #FF8E53;
        }
        
        .nav-btn:disabled {
            background: #CCCCCC;
            cursor: not-allowed;
        }
        
        .prev-btn { left: 20px; }
        .next-btn { right: 20px; }
        
        /* PAGE COUNTER */
        .page-counter {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
        }
        
        /* LOADER */
        .loader {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="flipbook-container" id="flipbook">
        <!-- Pages will be added by JavaScript -->
    </div>
    
    <button class="nav-btn prev-btn" id="prevBtn">←</button>
    <button class="nav-btn next-btn" id="nextBtn">→</button>
    
    <div class="page-counter" id="pageCounter">Cover</div>
    
    <div class="loader" id="loader">Loading your storybook...</div>
    
    <!-- PAGE TURN SOUND -->
    <audio id="pageSound" src="https://assets.mixkit.co/sfx/preview/mixkit-book-page-turn-1512.mp3" preload="auto"></audio>
    
    <script>
        // ===== CONFIGURATION =====
        // CHANGE THIS NUMBER IF YOU HAVE DIFFERENT PAGE COUNT
        const TOTAL_PAGES = 20; // Cover (1) + 18 content pages + Back cover (1)
        let currentPage = 1; // Start with cover (page 1)
        
        // ===== ELEMENTS =====
        const flipbook = document.getElementById('flipbook');
        const loader = document.getElementById('loader');
        const pageSound = document.getElementById('pageSound');
        
        // ===== LOAD PAGES =====
        function loadPages() {
            for (let i = 1; i <= TOTAL_PAGES; i++) {
                const page = document.createElement('div');
                page.className = 'page';
                page.id = `page${i}`;
                
                // Determine if left or right page
                if (i === 1) {
                    // Cover - starts on right
                    page.className += ' right';
                    page.style.left = '50%';
                } else if (i === TOTAL_PAGES) {
                    // Back cover - starts on left (hidden)
                    page.className += ' left';
                    page.style.left = '0%';
                    page.style.transform = 'rotateY(180deg)';
                } else {
                    // Content pages
                    if (i % 2 === 0) {
                        page.className += ' left';
                        page.style.left = '0%';
                    } else {
                        page.className += ' right';
                        page.style.left = '50%';
                    }
                }
                
                // Add image
                const img = document.createElement('img');
                const pageNum = i.toString().padStart(2, '0');
                img.src = `pages/${pageNum}.jpg`;
                img.alt = `Page ${i}`;
                
                img.onload = function() {
                    if (i === TOTAL_PAGES) {
                        // All images loaded
                        setTimeout(() => {
                            loader.style.display = 'none';
                        }, 500);
                    }
                };
                
                page.appendChild(img);
                flipbook.appendChild(page);
            }
            
            updateDisplay();
        }
        
        // ===== UPDATE DISPLAY =====
        function updateDisplay() {
            // Update counter
            let counterText = '';
            if (currentPage === 1) {
                counterText = 'Cover';
            } else if (currentPage === TOTAL_PAGES) {
                counterText = 'Back Cover';
            } else {
                counterText = `Page ${currentPage}`;
            }
            document.getElementById('pageCounter').textContent = counterText;
            
            // Update button states
            document.getElementById('prevBtn').disabled = currentPage <= 1;
            document.getElementById('nextBtn').disabled = currentPage >= TOTAL_PAGES;
            
            // Show current page
            for (let i = 1; i <= TOTAL_PAGES; i++) {
                const page = document.getElementById(`page${i}`);
                if (i === currentPage) {
                    page.style.transform = 'rotateY(0deg)';
                    page.style.zIndex = TOTAL_PAGES - i + 10;
                } else if (i < currentPage) {
                    // Pages that have been turned
                    page.style.transform = 'rotateY(-180deg)';
                    page.style.zIndex = i;
                } else {
                    // Pages not yet turned
                    page.style.transform = 'rotateY(0deg)';
                    page.style.zIndex = TOTAL_PAGES - i;
                }
            }
        }
        
        // ===== PAGE TURNING =====
        function nextPage() {
            if (currentPage < TOTAL_PAGES) {
                playSound();
                currentPage++;
                updateDisplay();
            }
        }
        
        function prevPage() {
            if (currentPage > 1) {
                playSound();
                currentPage--;
                updateDisplay();
            }
        }
        
        function playSound() {
            try {
                pageSound.currentTime = 0;
                pageSound.play().catch(e => console.log("Sound error:", e));
            } catch (e) {
                console.log("Sound error:", e);
            }
        }
        
        // ===== EVENT LISTENERS =====
        document.getElementById('nextBtn').addEventListener('click', nextPage);
        document.getElementById('prevBtn').addEventListener('click', prevPage);
        
        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextPage();
            if (e.key === 'ArrowLeft') prevPage();
        });
        
        // Touch/swipe support
        let startX = 0;
        let endX = 0;
        
        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
        });
        
        document.addEventListener('touchend', (e) => {
            endX = e.changedTouches[0].clientX;
            const diff = startX - endX;
            
            if (Math.abs(diff) > 50) { // Minimum swipe distance
                if (diff > 0) {
                    nextPage(); // Swipe left
                } else {
                    prevPage(); // Swipe right
                }
            }
        });
        
        // Click corners to turn pages
        document.addEventListener('click', (e) => {
            const container = document.querySelector('.flipbook-container');
            const rect = container.getBoundingClientRect();
            
            // Click in right 20% of container to go forward
            if (e.clientX > rect.right - (rect.width * 0.2)) {
                nextPage();
            }
            // Click in left 20% of container to go back
            else if (e.clientX < rect.left + (rect.width * 0.2)) {
                prevPage();
            }
        });
        
        // ===== INITIALIZE =====
        window.addEventListener('DOMContentLoaded', loadPages);
    </script>
</body>
</html>
